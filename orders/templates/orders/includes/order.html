{% load user_methods %}


<div class="card">
    <div class="card-body" role="button" onclick="window.location='{{ order.get_absolute_url }}'">
        <h5 class="card-title">{{ order.distance }} km for {{ order.price }} UAH</h5>
        <p class="text-muted">{{ order.datetime|date:"H:i:s d.m.Y" }}</p>
        <div>Stops:
            {% comment %} // TODO: Truncate stops {% endcomment %}
            <ul>
                {% for stop in order.stops %}
                    <li>{{ stop }}</li>
                {% endfor %}
            </ul>
        </div>
        {% if order.note %}
            <figure class="note note-success p-4">
                <blockquote class="blockquote">
                    {{ order.note }}
                </blockquote>
            </figure>
        {% endif %}
        <div>{{ order.get_car_type_display }} type</div>
        <div>{{ order.get_car_class_display }} class</div>
    </div>
    <div class="card-footer">
        {% has_perm  'accept_order' as can_accept_order %}
        {% if can_accept_order and order.is_open %}
            <form action="{% url 'orders:accept' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="pk" value="{{ order.pk }}" readonly="readonly">
                <button class="btn btn-primary w-100" type="submit">Accept</button>
            </form>
        {% endif %}
    </div>
</div>